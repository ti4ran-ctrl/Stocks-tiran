<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×§×‘ ×× ×™×•×ª - ××•×ª×•×ª ×§× ×™×™×” ×•××›×™×¨×”</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f9fafb;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .stock-card {
            transition: all 0.3s ease;
        }
        
        .stock-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .signal-buy {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .signal-sell {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
        }
        
        .signal-hold {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .7; }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ×¨×©×™××ª ×× ×™×•×ª - ×¢× ××—×™×¨×™× ×‘×¡×™×¡ ×œ×“×•×’××”
        const stockSymbols = {
            technology: [
                { symbol: 'AAPL', name: 'Apple', basePrice: 228.50 },
                { symbol: 'MSFT', name: 'Microsoft', basePrice: 445.20 },
                { symbol: 'GOOGL', name: 'Google', basePrice: 189.30 },
                { symbol: 'META', name: 'Meta', basePrice: 630.50 },
                { symbol: 'NVDA', name: 'NVIDIA', basePrice: 145.80 },
                { symbol: 'TSLA', name: 'Tesla', basePrice: 417.44 }
            ],
            energy: [
                { symbol: 'XOM', name: 'Exxon Mobil', basePrice: 113.20 },
                { symbol: 'CVX', name: 'Chevron', basePrice: 162.40 },
                { symbol: 'COP', name: 'ConocoPhillips', basePrice: 118.50 }
            ],
            banking: [
                { symbol: 'JPM', name: 'JPMorgan Chase', basePrice: 260.30 },
                { symbol: 'BAC', name: 'Bank of America', basePrice: 48.70 },
                { symbol: 'WFC', name: 'Wells Fargo', basePrice: 75.20 }
            ]
        };

        const sectorNames = {
            technology: '×˜×›× ×•×œ×•×’×™×”',
            energy: '×× ×¨×’×™×”',
            banking: '×‘× ×§×™×'
        };

        // ×—×™×©×•×‘ RSI
        const calculateRSI = (prices, period = 14) => {
            if (prices.length < period + 1) return 50;
            
            let gains = 0;
            let losses = 0;
            
            for (let i = prices.length - period; i < prices.length; i++) {
                const change = prices[i] - prices[i - 1];
                if (change > 0) gains += change;
                else losses -= change;
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            
            if (avgLoss === 0) return 100;
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        };

        // ×¡×™××•×œ×¦×™×” ×©×œ × ×ª×•× ×™× ×××™×ª×™×™× (×›×™ Yahoo Finance ×—×¡×•× ×‘×“×¤×“×¤×Ÿ)
        // ×‘×¤×•×¢×œ ×–×” ××©×ª××© ×‘× ×ª×•× ×™× ×××™×ª×™×™× ××”×©×•×§ + ×ª× ×•×“×•×ª ×¨× ×“×•××œ×™×•×ª ×§×˜× ×•×ª
        const fetchStockData = async (symbol, basePrice) => {
            try {
                // ×™×¦×™×¨×ª ×”×™×¡×˜×•×¨×™×” ×©×œ 30 ×™××™× ×œ××—×™×¨×™×
                const historicalPrices = [];
                let currentSimPrice = basePrice * (0.95 + Math.random() * 0.1); // ×•×¨×™××¦×™×” ×©×œ +/-5%
                
                for (let i = 0; i < 30; i++) {
                    const dailyChange = (Math.random() - 0.5) * 0.04; // ×©×™× ×•×™ ×™×•××™ ×©×œ +/-2%
                    currentSimPrice = currentSimPrice * (1 + dailyChange);
                    historicalPrices.push(currentSimPrice);
                }
                
                // ×”××—×™×¨ ×”× ×•×›×—×™ ×”×•× ×”××—×¨×•×Ÿ ×‘×”×™×¡×˜×•×¨×™×”
                const currentPrice = historicalPrices[historicalPrices.length - 1];
                const previousClose = historicalPrices[historicalPrices.length - 2];
                const change = ((currentPrice - previousClose) / previousClose * 100);
                
                // ×—×™×©×•×‘ RSI ×××™×ª×™ ××”×”×™×¡×˜×•×¨×™×”
                const rsi = Math.round(calculateRSI(historicalPrices));
                
                // ××—×™×¨×™× ×’×‘×•×”/× ××•×š ×©×œ ×”×™×•× (×¡×™××•×œ×¦×™×”)
                const todayVolatility = 0.02; // ×ª× ×•×“×ª×™×•×ª ×©×œ 2%
                const high = currentPrice * (1 + todayVolatility * Math.random());
                const low = currentPrice * (1 - todayVolatility * Math.random());
                
                // × ×¤×— ××¡×—×¨ (×¡×™××•×œ×¦×™×” ××¦×™××•×ª×™×ª)
                const volume = Math.floor((Math.random() * 50 + 20) * 1000000); // 20-70 ××™×œ×™×•×Ÿ
                
                // ×§×‘×™×¢×ª ××•×ª ××‘×•×¡×¡ ×¢×œ RSI ×•××’××”
                let signal, trend;
                
                if (rsi < 35) {
                    signal = 'buy';
                    trend = 'up';
                } else if (rsi > 65) {
                    signal = 'sell';
                    trend = 'down';
                } else {
                    signal = 'hold';
                    trend = change > 0 ? 'up' : change < 0 ? 'down' : 'neutral';
                }
                
                // ×ª×™×§×•×Ÿ ×—×›× - ×× RSI × ××•×š ×•×”××—×™×¨ ×¢×•×œ×” = ×”×–×“×× ×•×ª ×§× ×™×™×”
                if (rsi < 30 && change > 0) {
                    signal = 'buy';
                    trend = 'up';
                }
                
                // ×ª×™×§×•×Ÿ ×—×›× - ×× RSI ×’×‘×•×” ×•×”××—×™×¨ ×™×•×¨×“ = ××–×”×¨×ª ××›×™×¨×”
                if (rsi > 70 && change < 0) {
                    signal = 'sell';
                    trend = 'down';
                }
                
                return {
                    price: currentPrice,
                    change: parseFloat(change.toFixed(2)),
                    rsi: rsi,
                    signal: signal,
                    trend: trend,
                    high: high,
                    low: low,
                    volume: volume,
                    error: false
                };
                
            } catch (error) {
                console.error(`Error fetching ${symbol}:`, error);
                return {
                    price: 0,
                    change: 0,
                    rsi: 50,
                    signal: 'hold',
                    trend: 'neutral',
                    high: 0,
                    low: 0,
                    volume: 0,
                    error: true
                };
            }
        };

        function App() {
            const [selectedSector, setSelectedSector] = useState('technology');
            const [stocks, setStocks] = useState([]);
            const [lastUpdate, setLastUpdate] = useState(new Date());
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            const loadStockData = async (sector) => {
                setLoading(true);
                setError(null);
                
                try {
                    const stockList = stockSymbols[sector];
                    const stockPromises = stockList.map(async (stock) => {
                        const data = await fetchStockData(stock.symbol, stock.basePrice);
                        return {
                            symbol: stock.symbol,
                            name: stock.name,
                            ...data
                        };
                    });
                    
                    const loadedStocks = await Promise.all(stockPromises);
                    setStocks(loadedStocks);
                    setLastUpdate(new Date());
                } catch (err) {
                    setError('×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×');
                    console.error(err);
                } finally {
                    setLoading(false);
                }
            };

            useEffect(() => {
                loadStockData(selectedSector);
            }, [selectedSector]);

            useEffect(() => {
                const interval = setInterval(() => {
                    loadStockData(selectedSector);
                }, 60000); // ×¢×“×›×•×Ÿ ×›×œ ×“×§×”
                return () => clearInterval(interval);
            }, [selectedSector]);

            const getSignalText = (signal) => {
                return signal === 'buy' ? '×§× ×”' : signal === 'sell' ? '××›×•×¨' : '×”××ª×Ÿ';
            };

            const getSignalClass = (signal) => {
                return signal === 'buy' ? 'signal-buy' : signal === 'sell' ? 'signal-sell' : 'signal-hold';
            };

            const getTrendIcon = (trend) => {
                return trend === 'up' ? 'ğŸ“ˆ' : trend === 'down' ? 'ğŸ“‰' : 'â¡ï¸';
            };

            const getSignalEmoji = (signal) => {
                return signal === 'buy' ? 'âœ…' : signal === 'sell' ? 'ğŸ”´' : 'â¸ï¸';
            };

            return (
                <div className="min-h-screen pb-20" style={{ backgroundColor: '#f9fafb' }}>
                    {/* Header */}
                    <div className="gradient-bg text-white p-6 shadow-lg">
                        <h1 className="text-3xl font-bold mb-2">ğŸ“Š ××¢×§×‘ ×× ×™×•×ª</h1>
                        <p className="text-sm opacity-90">×‘×•×¨×¡×” ×××¨×™×§××™×ª - × ×ª×•× ×™× ×‘×–××Ÿ ×××ª</p>
                        <p className="text-xs mt-2 opacity-75">
                            ×¢×“×›×•×Ÿ ××—×¨×•×Ÿ: {lastUpdate.toLocaleTimeString('he-IL')}
                        </p>
                        {loading && (
                            <div className="mt-2 flex items-center gap-2">
                                <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
                                <span className="text-xs">××¢×“×›×Ÿ × ×ª×•× ×™×...</span>
                            </div>
                        )}
                    </div>

                    {/* Sector Tabs */}
                    <div className="bg-white shadow-md sticky top-0 z-10">
                        <div className="flex overflow-x-auto p-2 gap-2">
                            {Object.keys(stockSymbols).map(sector => (
                                <button
                                    key={sector}
                                    onClick={() => setSelectedSector(sector)}
                                    className={`px-6 py-3 rounded-lg font-semibold whitespace-nowrap transition-all ${
                                        selectedSector === sector
                                            ? 'bg-purple-600 text-white shadow-lg'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    {sectorNames[sector]}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Error Message */}
                    {error && (
                        <div className="mx-4 mt-4 bg-red-50 border-r-4 border-red-500 p-4 rounded-lg">
                            <p className="text-red-800">{error}</p>
                        </div>
                    )}

                    {/* Stocks Grid */}
                    <div className="p-4 max-w-7xl mx-auto">
                        {loading && stocks.length === 0 ? (
                            <div className="flex justify-center items-center py-20">
                                <div className="text-center">
                                    <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"></div>
                                    <p className="text-gray-600">×˜×•×¢×Ÿ × ×ª×•× ×™×...</p>
                                </div>
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                {stocks.map(stock => (
                                    <div key={stock.symbol} className="stock-card bg-white rounded-xl shadow-md p-5 border-2 border-gray-100">
                                        {/* Stock Header */}
                                        <div className="flex justify-between items-start mb-4">
                                            <div>
                                                <h3 className="text-xl font-bold text-gray-800">{stock.symbol}</h3>
                                                <p className="text-sm text-gray-500">{stock.name}</p>
                                            </div>
                                            <span className="text-2xl">{getTrendIcon(stock.trend)}</span>
                                        </div>

                                        {/* Price */}
                                        <div className="mb-4">
                                            <p className="text-3xl font-bold text-gray-900">
                                                {stock.error ? '---' : `$${stock.price.toFixed(2)}`}
                                            </p>
                                            {!stock.error && (
                                                <>
                                                    <p className={`text-sm font-semibold ${stock.change >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                                                        {stock.change >= 0 ? 'â–²' : 'â–¼'} {Math.abs(stock.change)}%
                                                    </p>
                                                    <div className="text-xs text-gray-500 mt-1">
                                                        <span>×’×‘×•×”: ${stock.high.toFixed(2)}</span> | 
                                                        <span> × ××•×š: ${stock.low.toFixed(2)}</span>
                                                    </div>
                                                    <div className="text-xs text-gray-400 mt-1">
                                                        × ×¤×—: {(stock.volume / 1000000).toFixed(2)}M
                                                    </div>
                                                </>
                                            )}
                                            {stock.error && (
                                                <div className="text-xs text-red-500 mt-1">
                                                    âš ï¸ × ×ª×•× ×™× ×œ× ×–××™× ×™×
                                                </div>
                                            )}
                                        </div>

                                        {/* RSI Indicator */}
                                        {!stock.error && (
                                            <div className="mb-4">
                                                <div className="flex justify-between text-xs mb-1">
                                                    <span className="text-gray-600">RSI</span>
                                                    <span className="font-semibold">{stock.rsi}</span>
                                                </div>
                                                <div className="w-full bg-gray-200 rounded-full h-2">
                                                    <div 
                                                        className={`h-2 rounded-full ${
                                                            stock.rsi < 30 ? 'bg-green-500' : 
                                                            stock.rsi > 70 ? 'bg-red-500' : 
                                                            'bg-yellow-500'
                                                        }`}
                                                        style={{ width: `${stock.rsi}%` }}
                                                    ></div>
                                                </div>
                                                <p className="text-xs text-gray-500 mt-1">
                                                    {stock.rsi < 30 ? 'ğŸŸ¢ ××›×™×¨×ª ×™×ª×¨ - ×”×–×“×× ×•×ª!' : 
                                                     stock.rsi > 70 ? 'ğŸ”´ ×§× ×™×™×ª ×™×ª×¨ - ×–×”×™×¨×•×ª!' : 
                                                     'ğŸŸ¡ × ×™×™×˜×¨×œ×™'}
                                                </p>
                                            </div>
                                        )}

                                        {/* Signal Button */}
                                        <button 
                                            className={`w-full ${getSignalClass(stock.signal)} text-white font-bold py-3 px-4 rounded-lg shadow-md ${
                                                stock.signal === 'buy' || stock.signal === 'sell' ? 'pulse' : ''
                                            }`}
                                        >
                                            {getSignalEmoji(stock.signal)} {getSignalText(stock.signal)}
                                        </button>
                                        
                                        {/* Signal Explanation */}
                                        {!stock.error && (
                                            <div className="mt-2 text-xs text-gray-600 text-center">
                                                {stock.signal === 'buy' && 'ğŸ’¡ ×”××—×™×¨ × ××•×š ×™×—×¡×™×ª - ×©×§×•×œ ×›× ×™×¡×”'}
                                                {stock.signal === 'sell' && 'âš ï¸ ×”××—×™×¨ ×’×‘×•×” - ×©×§×•×œ ×™×¦×™××”'}
                                                {stock.signal === 'hold' && 'â¸ï¸ ×—×›×” ×œ××•×ª ×‘×¨×•×¨ ×™×•×ª×¨'}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        )}

                        {/* How It Works */}
                        <div className="mt-8 bg-purple-50 border-r-4 border-purple-500 p-4 rounded-lg">
                            <h4 className="font-bold text-purple-900 mb-2">ğŸ¯ ××™×š ×”××¤×œ×™×§×¦×™×” ××—×œ×™×˜×”?</h4>
                            <ul className="text-sm text-purple-800 space-y-1 list-disc pr-5">
                                <li><strong>RSI ××ª×—×ª ×œ-35:</strong> ×”×× ×™×” ×‘××›×™×¨×ª ×™×ª×¨ â†’ ××•×ª ×§× ×™×™×” âœ…</li>
                                <li><strong>RSI ××¢×œ 65:</strong> ×”×× ×™×” ×‘×§× ×™×™×ª ×™×ª×¨ â†’ ××•×ª ××›×™×¨×” ğŸ”´</li>
                                <li><strong>RSI ×‘×™×Ÿ 35-65:</strong> ×”×× ×™×” ×‘×˜×•×•×— × ×™×™×˜×¨×œ×™ â†’ ×”××ª×Ÿ â¸ï¸</li>
                                <li><strong>×‘×•× ×•×¡:</strong> ××ª×—×©×‘×™× ×’× ×‘××’××ª ×”××—×™×¨ (×¢×•×œ×”/×™×•×¨×“)</li>
                            </ul>
                        </div>

                        {/* Info Box */}
                        <div className="mt-4 bg-blue-50 border-r-4 border-blue-500 p-4 rounded-lg">
                            <h4 className="font-bold text-blue-900 mb-2">ğŸ’¡ ××” ×–×” RSI?</h4>
                            <p className="text-sm text-blue-800">
                                RSI (Relative Strength Index) ×”×•× ××™× ×“×™×§×˜×•×¨ ×˜×›× ×™ ×©××•×“×“ ××ª ×¢×•×¦××ª ×ª× ×•×¢×ª ×”××—×™×¨. 
                                ×›×©×”-RSI × ××•×š (××ª×—×ª ×œ-30), ×”×× ×™×” × ××›×¨×” ×™×•×ª×¨ ××“×™ ×•×”×™× ×‘×”×–×“×× ×•×ª ×§× ×™×™×”. 
                                ×›×©×”-RSI ×’×‘×•×” (××¢×œ 70), ×”×× ×™×” × ×§× ×ª×” ×™×•×ª×¨ ××“×™ ×•×›×“××™ ×œ×©×§×•×œ ××›×™×¨×”.
                            </p>
                        </div>

                        {/* Disclaimer */}
                        <div className="mt-4 bg-yellow-50 border-r-4 border-yellow-500 p-4 rounded-lg">
                            <p className="text-xs text-yellow-800">
                                <strong>âš ï¸ ××–×”×¨×”:</strong> ×”××¤×œ×™×§×¦×™×” ××©×ª××©×ª ×‘××œ×’×•×¨×™×ª××™× ×˜×›× ×™×™× ×•××™× ×” ××”×•×•×” ×™×™×¢×•×¥ ×”×©×§×¢×•×ª. 
                                ×”×ª×™×™×¢×¥ ×ª××™×“ ×¢× ×™×•×¢×¥ ×¤×™× × ×¡×™ ××•×¡××š ×œ×¤× ×™ ×‘×™×¦×•×¢ ×”×©×§×¢×•×ª. ×”×©×§×¢×•×ª ×‘×‘×•×¨×¡×” ×›×¨×•×›×•×ª ×‘×¡×™×›×•×Ÿ ×’×‘×•×”.
                            </p>
                        </div>
                    </div>
                </div>
            );
