<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>××¢×§×‘ ×× ×™×•×ª - ××•×ª×•×ª ×§× ×™×™×” ×•××›×™×¨×”</title>
    
    <!-- React and dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Heebo', sans-serif;
            background-color: #f9fafb;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .stock-card {
            transition: all 0.3s ease;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #f3f4f6;
        }
        
        .stock-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .signal-buy {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .signal-sell {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
        }
        
        .signal-hold {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .7; }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        .loading-text {
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
        }
        
        #root {
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading-text">
            <div style="display: inline-block; width: 50px; height: 50px; border: 4px solid #e5e7eb; border-top-color: #667eea; border-radius: 50%;" class="animate-spin"></div>
            <p style="margin-top: 20px; font-size: 18px;">×˜×•×¢×Ÿ ××¤×œ×™×§×¦×™×”...</p>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ×¨×©×™××ª ×× ×™×•×ª ×œ×¤×™ ×¡×§×˜×•×¨
        const stockSymbols = {
            technology: [
                { symbol: 'AAPL', name: 'Apple' },
                { symbol: 'MSFT', name: 'Microsoft' },
                { symbol: 'GOOGL', name: 'Google' },
                { symbol: 'META', name: 'Meta' },
                { symbol: 'NVDA', name: 'NVIDIA' },
                { symbol: 'TSLA', name: 'Tesla' }
            ],
            energy: [
                { symbol: 'XOM', name: 'Exxon Mobil' },
                { symbol: 'CVX', name: 'Chevron' },
                { symbol: 'COP', name: 'ConocoPhillips' }
            ],
            banking: [
                { symbol: 'JPM', name: 'JPMorgan Chase' },
                { symbol: 'BAC', name: 'Bank of America' },
                { symbol: 'WFC', name: 'Wells Fargo' }
            ]
        };

        const sectorNames = {
            technology: '×˜×›× ×•×œ×•×’×™×”',
            energy: '×× ×¨×’×™×”',
            banking: '×‘× ×§×™×'
        };

        // ×—×™×©×•×‘ RSI
        const calculateRSI = (prices, period = 14) => {
            if (prices.length < period + 1) return 50;
            
            let gains = 0;
            let losses = 0;
            
            for (let i = prices.length - period; i < prices.length; i++) {
                const change = prices[i] - prices[i - 1];
                if (change > 0) gains += change;
                else losses -= change;
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            
            if (avgLoss === 0) return 100;
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        };

        // ×§×‘×œ×ª × ×ª×•× ×™ ×× ×™×”
        const fetchStockData = async (symbol) => {
            const urls = [
                `https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1d&range=1mo`,
                `https://query2.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1d&range=1mo`
            ];
            
            for (const url of urls) {
                try {
                    const response = await fetch(url);
                    if (!response.ok) continue;
                    
                    const data = await response.json();
                    
                    if (!data.chart || !data.chart.result || data.chart.result.length === 0) {
                        continue;
                    }
                    
                    const result = data.chart.result[0];
                    const quote = result.indicators.quote[0];
                    const prices = quote.close.filter(p => p !== null);
                    const meta = result.meta;
                    
                    const currentPrice = meta.regularMarketPrice || prices[prices.length - 1];
                    const previousClose = meta.chartPreviousClose || prices[prices.length - 2];
                    const change = ((currentPrice - previousClose) / previousClose * 100);
                    const rsi = Math.round(calculateRSI(prices));
                    
                    let signal, trend;
                    if (rsi < 35) {
                        signal = 'buy';
                        trend = 'up';
                    } else if (rsi > 65) {
                        signal = 'sell';
                        trend = 'down';
                    } else {
                        signal = 'hold';
                        trend = change > 0 ? 'up' : change < 0 ? 'down' : 'neutral';
                    }
                    
                    if (rsi < 30 && change > 0) {
                        signal = 'buy';
                        trend = 'up';
                    }
                    
                    if (rsi > 70 && change < 0) {
                        signal = 'sell';
                        trend = 'down';
                    }
                    
                    return {
                        price: currentPrice,
                        change: parseFloat(change.toFixed(2)),
                        rsi: rsi,
                        signal: signal,
                        trend: trend,
                        high: quote.high[quote.high.length - 1] || currentPrice,
                        low: quote.low[quote.low.length - 1] || currentPrice,
                        volume: quote.volume[quote.volume.length - 1] || 0,
                        error: false
                    };
                    
                } catch (error) {
                    console.error(`Error fetching ${symbol} from ${url}:`, error);
                    continue;
                }
            }
            
            // ×× ×›×œ ×”× ×™×¡×™×•× ×•×ª × ×›×©×œ×•
            return {
                price: 0,
                change: 0,
                rsi: 50,
                signal: 'hold',
                trend: 'neutral',
                high: 0,
                low: 0,
                volume: 0,
                error: true
            };
        };

        function App() {
            const [selectedSector, setSelectedSector] = useState('technology');
            const [stocks, setStocks] = useState([]);
            const [lastUpdate, setLastUpdate] = useState(new Date());
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            const loadStockData = async (sector) => {
                setLoading(true);
                setError(null);
                
                try {
                    const stockList = stockSymbols[sector];
                    const stockPromises = stockList.map(async (stock) => {
                        const data = await fetchStockData(stock.symbol);
                        return {
                            symbol: stock.symbol,
                            name: stock.name,
                            ...data
                        };
                    });
                    
                    const loadedStocks = await Promise.all(stockPromises);
                    setStocks(loadedStocks);
                    setLastUpdate(new Date());
                } catch (err) {
                    setError('×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×');
                    console.error(err);
                } finally {
                    setLoading(false);
                }
            };

            useEffect(() => {
                loadStockData(selectedSector);
            }, [selectedSector]);

            useEffect(() => {
                const interval = setInterval(() => {
                    loadStockData(selectedSector);
                }, 60000);
                return () => clearInterval(interval);
            }, [selectedSector]);

            const getSignalText = (signal) => {
                return signal === 'buy' ? '×§× ×”' : signal === 'sell' ? '××›×•×¨' : '×”××ª×Ÿ';
            };

            const getSignalClass = (signal) => {
                return signal === 'buy' ? 'signal-buy' : signal === 'sell' ? 'signal-sell' : 'signal-hold';
            };

            const getTrendIcon = (trend) => {
                return trend === 'up' ? 'ğŸ“ˆ' : trend === 'down' ? 'ğŸ“‰' : 'â¡ï¸';
            };

            return React.createElement('div', { style: { minHeight: '100vh', paddingBottom: '80px' } },
                React.createElement('div', { className: 'gradient-bg', style: { color: 'white', padding: '24px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)' } },
                    React.createElement('h1', { style: { fontSize: '30px', fontWeight: 'bold', marginBottom: '8px' } }, 'ğŸ“Š ××¢×§×‘ ×× ×™×•×ª'),
                    React.createElement('p', { style: { fontSize: '14px', opacity: 0.9 } }, '×‘×•×¨×¡×” ×××¨×™×§××™×ª - × ×ª×•× ×™× ×‘×–××Ÿ ×××ª'),
                    React.createElement('p', { style: { fontSize: '12px', marginTop: '8px', opacity: 0.75 } }, 
                        '×¢×“×›×•×Ÿ ××—×¨×•×Ÿ: ' + lastUpdate.toLocaleTimeString('he-IL')
                    ),
                    loading && React.createElement('div', { style: { marginTop: '8px', display: 'flex', alignItems: 'center', gap: '8px' } },
                        React.createElement('div', { className: 'animate-spin', style: { height: '16px', width: '16px', border: '2px solid white', borderTopColor: 'transparent', borderRadius: '50%' } }),
                        React.createElement('span', { style: { fontSize: '12px' } }, '××¢×“×›×Ÿ × ×ª×•× ×™×...')
                    )
                ),
                
                React.createElement('div', { style: { background: 'white', boxShadow: '0 2px 4px rgba(0,0,0,0.1)', position: 'sticky', top: 0, zIndex: 10 } },
                    React.createElement('div', { style: { display: 'flex', overflowX: 'auto', padding: '8px', gap: '8px' } },
                        Object.keys(stockSymbols).map(sector =>
                            React.createElement('button', {
                                key: sector,
                                onClick: () => setSelectedSector(sector),
                                style: {
                                    padding: '12px 24px',
                                    borderRadius: '8px',
                                    fontWeight: '600',
                                    whiteSpace: 'nowrap',
                                    transition: 'all 0.3s',
                                    background: selectedSector === sector ? '#9333ea' : '#f3f4f6',
                                    color: selectedSector === sector ? 'white' : '#374151',
                                    border: 'none',
                                    cursor: 'pointer',
                                    boxShadow: selectedSector === sector ? '0 4px 6px rgba(0,0,0,0.1)' : 'none'
                                }
                            }, sectorNames[sector])
                        )
                    )
                ),
                
                error && React.createElement('div', { style: { margin: '16px', background: '#fef2f2', borderRight: '4px solid #ef4444', padding: '16px', borderRadius: '8px' } },
                    React.createElement('p', { style: { color: '#991b1b' } }, error)
                ),
                
                React.createElement('div', { style: { padding: '16px', maxWidth: '1280px', margin: '0 auto' } },
                    loading && stocks.length === 0 ? 
                        React.createElement('div', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '80px 0' } },
                            React.createElement('div', { style: { textAlign: 'center' } },
                                React.createElement('div', { className: 'animate-spin', style: { height: '64px', width: '64px', border: '4px solid #e5e7eb', borderTopColor: '#9333ea', borderRadius: '50%', margin: '0 auto 16px' } }),
                                React.createElement('p', { style: { color: '#4b5563' } }, '×˜×•×¢×Ÿ × ×ª×•× ×™×...')
                            )
                        )
                    :
                        React.createElement('div', { style: { display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: '16px' } },
                            stocks.map(stock =>
                                React.createElement('div', { key: stock.symbol, className: 'stock-card' },
                                    React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'start', marginBottom: '16px' } },
                                        React.createElement('div', null,
                                            React.createElement('h3', { style: { fontSize: '20px', fontWeight: 'bold', color: '#1f2937' } }, stock.symbol),
                                            React.createElement('p', { style: { fontSize: '14px', color: '#6b7280' } }, stock.name)
                                        ),
                                        React.createElement('span', { style: { fontSize: '24px' } }, getTrendIcon(stock.trend))
                                    ),
                                    
                                    React.createElement('div', { style: { marginBottom: '16px' } },
                                        React.createElement('p', { style: { fontSize: '30px', fontWeight: 'bold', color: '#111827' } }, 
                                            stock.error ? '---' : '$' + stock.price.toFixed(2)
                                        ),
                                        !stock.error && React.createElement('p', { 
                                            style: { 
                                                fontSize: '14px', 
                                                fontWeight: '600',
                                                color: stock.change >= 0 ? '#059669' : '#dc2626'
                                            } 
                                        }, 
                                            (stock.change >= 0 ? 'â–² ' : 'â–¼ ') + Math.abs(stock.change) + '%'
                                        ),
                                        stock.high > 0 && !stock.error && React.createElement('div', { style: { fontSize: '12px', color: '#6b7280', marginTop: '4px' } },
                                            '×’×‘×•×”: $' + stock.high.toFixed(2) + ' | × ××•×š: $' + stock.low.toFixed(2)
                                        ),
                                        stock.volume > 0 && !stock.error && React.createElement('div', { style: { fontSize: '12px', color: '#9ca3af', marginTop: '4px' } },
                                            '× ×¤×—: ' + (stock.volume / 1000000).toFixed(2) + 'M'
                                        ),
                                        stock.error && React.createElement('div', { style: { fontSize: '12px', color: '#ef4444', marginTop: '4px' } },
                                            'âš ï¸ × ×ª×•× ×™× ×œ× ×–××™× ×™× ×›×¨×’×¢'
                                        )
                                    ),
                                    
                                    !stock.error && React.createElement('div', { style: { marginBottom: '16px' } },
                                        React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', fontSize: '12px', marginBottom: '4px' } },
                                            React.createElement('span', { style: { color: '#6b7280' } }, 'RSI'),
                                            React.createElement('span', { style: { fontWeight: '600' } }, stock.rsi)
                                        ),
                                        React.createElement('div', { style: { width: '100%', background: '#e5e7eb', borderRadius: '9999px', height: '8px' } },
                                            React.createElement('div', { 
                                                style: { 
                                                    height: '8px', 
                                                    borderRadius: '9999px',
                                                    width: stock.rsi + '%',
                                                    background: stock.rsi < 30 ? '#10b981' : stock.rsi > 70 ? '#ef4444' : '#eab308'
                                                } 
                                            })
                                        ),
                                        React.createElement('p', { style: { fontSize: '12px', color: '#6b7280', marginTop: '4px' } },
                                            stock.rsi < 30 ? '××›×™×¨×ª ×™×ª×¨ - ×”×–×“×× ×•×ª!' : stock.rsi > 70 ? '×§× ×™×™×ª ×™×ª×¨ - ×–×”×™×¨×•×ª!' : '× ×™×™×˜×¨×œ×™'
                                        )
                                    ),
                                    
                                    React.createElement('button', { 
                                        className: getSignalClass(stock.signal) + (stock.signal !== 'hold' ? ' pulse' : ''),
                                        style: {
                                            width: '100%',
                                            color: 'white',
                                            fontWeight: 'bold',
                                            padding: '12px 16px',
                                            borderRadius: '8px',
                                            boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
                                            border: 'none',
                                            cursor: 'pointer'
                                        }
                                    }, 'ğŸ¯ ' + getSignalText(stock.signal))
                                )
                            )
                        ),
                    
                    React.createElement('div', { style: { marginTop: '32px', background: '#ecfdf5', borderRight: '4px solid #10b981', padding: '16px', borderRadius: '8px' } },
                        React.createElement('h4', { style: { fontWeight: 'bold', color: '#065f46', marginBottom: '8px' } }, 'âœ… × ×ª×•× ×™× ×‘×–××Ÿ ×××ª ×-Yahoo Finance'),
                        React.createElement('p', { style: { fontSize: '14px', color: '#047857' } },
                            '×”××¤×œ×™×§×¦×™×” ××•×©×›×ª × ×ª×•× ×™× ×××™×ª×™×™× ×•×××™× ×™× ×-Yahoo Finance. ×”× ×ª×•× ×™× ××ª×¢×“×›× ×™× ××•×˜×•××˜×™×ª ×›×œ ×“×§×”.'
                        )
                    ),
                    
                    React.createElement('div', { style: { marginTop: '16px', background: '#eff6ff', borderRight: '4px solid #3b82f6', padding: '16px', borderRadius: '8px' } },
                        React.createElement('h4', { style: { fontWeight: 'bold', color: '#1e40af', marginBottom: '8px' } }, 'ğŸ’¡ ×”×¡×‘×¨ ×¢×œ ×”××™× ×“×™×§×˜×•×¨×™×'),
                        React.createElement('ul', { style: { fontSize: '14px', color: '#1e40af', paddingRight: '20px' } },
                            React.createElement('li', { style: { marginBottom: '4px' } }, 
                                React.createElement('strong', null, 'RSI:'), ' ××ª×—×ª ×œ-30 = ×”×–×“×× ×•×ª ×§× ×™×™×”, ××¢×œ 70 = ×©×§×•×œ ××›×™×¨×”'
                            ),
                            React.createElement('li', { style: { marginBottom: '4px' } }, 
                                React.createElement('strong', null, '××•×ª ×§× ×™×™×” ğŸ“ˆ:'), ' ×”×× ×™×” ×‘××’××ª ×¢×œ×™×™×”'
                            ),
                            React.createElement('li', { style: { marginBottom: '4px' } }, 
                                React.createElement('strong', null, '××•×ª ××›×™×¨×” ğŸ“‰:'), ' ×”×× ×™×” ×¢×œ×ª×” ×××•×“'
                            ),
                            React.createElement('li', null, 
                                React.createElement('strong', null, '×”××ª×Ÿ â¡ï¸:'), ' ×—×›×” ×œ××•×ª ×‘×¨×•×¨ ×™×•×ª×¨'
                            )
                        )
                    ),
                    
                    React.createElement('div', { style: { marginTop: '16px', background: '#fefce8', borderRight: '4px solid #eab308', padding: '16px', borderRadius: '8px' } },
                        React.createElement('p', { style: { fontSize: '12px', color: '#713f12' } },
                            React.createElement('strong', null, 'âš ï¸ ××–×”×¨×”: '),
                            '×”××™×“×¢ ××™× ×• ××”×•×•×” ×™×™×¢×•×¥ ×”×©×§×¢×•×ª. ×”×ª×™×™×¢×¥ ×¢× ×™×•×¢×¥ ×¤×™× × ×¡×™ ×œ×¤× ×™ ×”×©×§×¢×•×ª.'
                        )
                    )
                )
            );
        }

        // ×˜×¢×™× ×ª ×”××¤×œ×™×§×¦×™×”
        const rootElement = document.getElementById('root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(React.createElement(App));
    </script>
</body>
</html>
